# 1C AI Feature Dev Workflow

Воркфлоу для разработки доработок в **существующей** конфигурации 1С:Предприятие. Анализирует кодовую базу, проектирует архитектуру, пишет код с соблюдением стандартов и проверяет качество.

## Для чего

Набор агентов помогает дорабатывать **уже существующую** конфигурацию 1С:
- Изучает существующие паттерны и архитектуру
- Предлагает варианты реализации с учётом вашей кодовой базы
- Пишет код, который соответствует вашим стандартам
- Проверяет код на баги и соответствие правилам проекта

## Команда

```bash
/1c-feature-dev Добавить интеграцию с API складской системы
```

## Воркфлоу (7 фаз)

| Фаза | Что происходит |
|------|----------------|
| **1. Discovery** | Уточнение задачи и требований |
| **2. Исследование** | Анализ существующей кодовой базы: похожие доработки, паттерны, архитектура |
| **3. Уточняющие вопросы** | Выявление неоднозначностей перед проектированием |
| **4. Архитектура** | 3 варианта реализации с компромиссами, выбор подхода |
| **5. Реализация** | Написание кода агентом `1c-code-writer` |
| **6. Проверка** | Code-review с итеративным исправлением |
| **7. Итоги** | Документация изменений |

## Агенты

| Агент | Назначение |
|-------|------------|
| `1c-code-explorer` | Анализ существующей кодовой базы, трассировка выполнения |
| `1c-code-architect` | Проектирование архитектуры с учётом паттернов проекта |
| `1c-code-writer` | Написание кода по стандартам из `1c-rules.md` |
| `1c-code-reviewer` | Проверка кода на баги и соответствие стандартов |

## Использование агентов отдельно

Не обязательно запускать полный воркфлоу — агенты можно использовать по отдельности:

```bash
# Только исследовать код
"Запусти 1c-code-explorer для анализа того, как работает авторизация"

# Только спроектировать
"Запусти 1c-code-architect для проектирования слоя кеширования"

# Только написать код
"Запусти 1c-code-writer для реализации процедуры XYZ"

# Только проверить код
"Запусти 1c-code-reviewer для проверки моих последних изменений"
```

## Пример диалога

```
Вы: /1c-feature-dev Добавить кеширование запросов к справочникам

Claude: Давайте уточню задачу...
      - Какие справочники кешировать?
      - На какой срок?
      - Что делать при изменении данных?

Вы: Справочники Номенклатура и Контрагенты, срок 1 час, сброс при записи

[Фаза 2: Исследование]
Найдены похожие доработки:
- ОбщиеМодули/КешМенеджер.bsl — уже есть механизм кеширования
- ОбщиеМодули/ОбработчикиСобытийКеша.bsl — обработчики сброса

[Фаза 4: Архитектура]
Рекомендую подход 2: использовать существующий КешМенеджер

Вы: Подход 2

[Фаза 5: Реализация]
✓ Код написан

[Фаза 6: Проверка]
Найдено 1 проблема: отсутствует обработка ошибок при работе с кешем. Исправить?

Вы: Да

✓ Исправлено

[Фаза 7: Итоги]
Готово! Создан ОбщиеМодули/КешСправочниковСервер.bsl
```

## Установка

Скопируйте файлы агентов и скиллов в соответствующую директорию вашего LLM-инструмента. Пути могут отличаться:

**Для Claude Code:**
```bash
cp agents/1c-code-*.md ~/.claude/agents/
cp -r skills/1c-ai-feature-dev-workflow ~/.claude/skills/
cp rules/1c-rules.md ~/.claude/rules/
```

**Для других инструментов:** сверьтесь с документацией по установке агентов.

> **Примечание для не Claude Code инструмента:**
> В агентах используются специфичные для Claude Code пути:
> - `~/.claude/` — замените на директорию вашего инструмента
> - `~/.claude/rules/1c-rules.md` — ваш файл с правилами кодирования
> - `CLAUDE.md` — ваш файл с правилами проекта (может называться `PROJECT_GUIDELINES.md`, `rules.md` и др.)
>
> Агенты будут работать корректно, если файлы правил доступны по вашим путям.

## Когда использовать

✅ **Доработки в существующей конфигурации**:
- Новые объекты метаданных
- Интеграции с внешними системами
- Сложная бизнес-логика
- Неясные требования

❌ **Не для простых задач**:
- Однострочные исправления
- Тривиальные изменения
- Срочные хотфиксы

## Требования

- LLM-инструмент с поддержкой субагентов (Claude Code и др.)
- Git-репозиторий с конфигурацией 1С
- Файл правил кодирования (`1c-rules.md` или аналогичный)
- MCP-сервер справки 1С (опционально, используется агентами `1c-code-writer` и `1c-code-reviewer` для проверки синтаксиса, поиска методов и избежания коллизий имён)

## Особенности

- **План сохраняется в файл** `.tasks/task-[name]/plan.md` — можно вернуться к задаче позже
- **Итеративное ревью** — пишем → проверяем → исправляем → повторяем

## Происхождение

Адаптация воркфлоу [feature-dev](https://github.com/anthropics/claude-plugins-official/tree/main/plugins/feature-dev) от Anthropic для платформы 1С:Предприятие.

## Лицензия

MIT License — см. [LICENSE](LICENSE)
